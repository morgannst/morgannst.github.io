<!doctypehtml><html lang=th><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>My Image Gallery SRNANIMALCARE - MINI App</title><meta name=description content="View your uploaded images."><meta name=author content=SRNANIMALCARE><meta property=og:title content="View your uploaded images-SRNANIMALCARE"><meta property=og:description content="View your uploaded images-MINI App"><meta property=og:type content=website><meta property=og:image content=https://irlsgwnkyjcmgjcnbtqk.supabase.co/storage/v1/object/public/user-images/U16d6c115ff26471a9d1e6871485f67cd/1760282211086.jpeg><script src=https://cdn.tailwindcss.com></script><script src=https://static.line-scdn.net/liff/edge/2/sdk.js></script><script src=https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2></script><script src=https://cdn.jsdelivr.net/npm/sweetalert2@11></script><style>@import url(https://fonts.googleapis.com/css2?family=Prompt:wght@400;500;600;700&display=swap);body{font-family:Prompt,sans-serif;background:linear-gradient(180deg,#f0f2f5 0,#d8dae2 100%);color:#1f2937}.shadow-instagram{box-shadow:0 4px 15px rgba(0,0,0,.08),0 2px 5px rgba(0,0,0,.05)}.shadow-light{box-shadow:0 1px 3px rgba(0,0,0,.06),0 1px 2px rgba(0,0,0,.1)}.btn-primary{background:linear-gradient(45deg,#ff6b6b,#ffb86b);color:#fff;transition:all .3s ease;box-shadow:0 5px 15px rgba(255,107,107,.3)}.btn-primary:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(255,107,107,.4)}.btn-share{background:linear-gradient(45deg,#10b981,#34d399);color:#fff;transition:all .3s ease;box-shadow:0 5px 15px rgba(16,185,129,.3)}.btn-share:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(16,185,129,.4)}.swal2-popup{background-color:#fff!important;border-radius:1.5rem!important;box-shadow:0 10px 30px rgba(0,0,0,.1),0 5px 10px rgba(0,0,0,.05)!important}.swal2-title{color:#1f2937!important;font-weight:600!important}.swal2-html-container img{border-radius:1rem}.swal2-cancel{background-color:#e5e7eb!important;color:#4b5563!important;border-radius:.75rem!important}.swal2-styled.swal2-confirm{margin-left:.5rem!important}.image-item{position:relative;overflow:hidden;border-radius:.75rem;background-color:#e5e7eb;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,.1)}.image-item::before{content:'';display:block;padding-top:100%}.image-item img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.image-item:hover img{transform:scale(1.05)}@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.fade-in{animation:fadeIn .5s ease-out forwards}#loading-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(255,255,255,.9);backdrop-filter:blur(8px);display:none;justify-content:center;align-items:center;z-index:9999;flex-direction:column;gap:1rem}#profile-picture{border-radius:50%;border:4px solid #fff;box-shadow:0 6px 20px rgba(0,0,0,.15)}</style><body class=min-h-screen><div id=loading-overlay><img src=https://developers.line.biz/media/line-mini-app/LINE_spinner_light.svg alt=Loading... class="w-16 h-16"><p id=loading-text class="text-lg text-gray-600">กำลังโหลด...</div><div class="container mx-auto max-w-lg bg-white rounded-t-3xl shadow-instagram min-h-screen"><header class="p-4 flex items-center justify-between border-b border-gray-100"><h2 class="text-lg font-semibold text-gray-800">Profile</h2></header><div id=profile-header class="text-center py-8 flex flex-col items-center gap-4 fade-in"style=visibility:hidden><img id=profile-picture src="https://placehold.co/128x128/E5E7EB/9CA3AF?text=User"alt="Profile Picture"class="w-28 h-28 rounded-full shadow-lg"><h1 id=display-name class="text-2xl font-bold text-gray-800">Display Name</h1></div><div class="px-4 pb-8"><h3 class="text-xl font-bold mb-4 text-gray-800">My Photos</h3><main id=image-grid class="grid grid-cols-3 gap-2"></main><div id=load-more-container class="text-center mt-8"style=display:none><button id=load-more-btn class="btn-primary font-bold py-3 px-8 rounded-full shadow-instagram">โหลดเพิ่มเติม</button></div><div id=no-images-message class="text-center text-gray-500 p-8"style=display:none><p>ไม่พบรูปภาพในคอลเลกชันของคุณ</div></div></div><script type=module>function _0x560e(e,t){const a=_0x16d5();return(_0x560e=function(e,t){return a[e-=312]})(e,t)}const _0x35395a=_0x560e;!function(e,t){const a=_0x560e,n=_0x16d5();for(;;)try{if(225662===-parseInt(a(331))/1*(-parseInt(a(369))/2)+-parseInt(a(317))/3+parseInt(a(388))/4*(-parseInt(a(384))/5)+parseInt(a(314))/6*(parseInt(a(370))/7)+-parseInt(a(368))/8*(parseInt(a(329))/9)+parseInt(a(333))/10*(parseInt(a(364))/11)+parseInt(a(315))/12)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const LIFF_ID=_0x35395a(359),SUPABASE_URL="https://irlsgwnkyjcmgjcnbtqk.supabase.co",SUPABASE_KEY=_0x35395a(357),{createClient:createClient}=supabase,supabaseClient=createClient(SUPABASE_URL,SUPABASE_KEY),loadingOverlay=document[_0x35395a(347)](_0x35395a(338)),loadingText=document[_0x35395a(347)](_0x35395a(337)),profileHeader=document[_0x35395a(347)](_0x35395a(346)),profilePicture=document[_0x35395a(347)]("profile-picture"),displayName=document[_0x35395a(347)](_0x35395a(365)),imageGrid=document[_0x35395a(347)](_0x35395a(340)),loadMoreContainer=document[_0x35395a(347)]("load-more-container"),loadMoreBtn=document[_0x35395a(347)](_0x35395a(378)),noImagesMessage=document[_0x35395a(347)]("no-images-message");let currentUserId=null,imageOffset=0,isLoading=!1,hasMoreImages=!0;function _0x16d5(){const e=["btn-primary","swal-view-btn","visible","get-user-images","tabindex","flex","length","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlybHNnd25reWpjbWdqY25idHFrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAyNzU5NzMsImV4cCI6MjA3NTg1MTk3M30.2oDM6Z2pjP5Ga5u-0RCitcbAzNbgJ56qTLDzgDdq4Jo","ยกเลิก","2008276127-wBplmxWo","button",'" class="w-full max-w-xs mx-auto rounded-lg mb-4 shadow-light">\n                <div class="flex justify-center gap-4">\n                    <button id="swal-view-btn" class="btn-primary font-bold py-2 px-6 rounded-lg">ดูภาพ</button>\n                    <button id="swal-share-btn" class="btn-share font-bold py-2 px-6 rounded-lg">แชร์</button>\n                </div>\n            ',"pictureUrl","โหลดเพิ่มเติม","1045miNBsN","display-name","role","กำลังเริ่มต้น...","253192GBlwzG","4xgWSfY","21CCJNON","rounded-lg shadow-instagram","click","none","createElement","div","login","href","load-more-btn","init",'<img src="',"swal2-popup",'<p class="text-center text-red-400 p-8">เกิดข้อผิดพลาดในการเริ่มต้นแอปพลิเคชัน: ',"top-end","5665pMdopC","shareTargetPicker","เบราว์เซอร์ของคุณไม่รองรับการแชร์","swal2-title","700qGrueW","disabled","กำลังโหลด...","functions","innerHTML","Failed to fetch images:","Share failed:","visibility","block","10734YHOAUR","7402728caZADv","transparent","1240917DfuiKO","Full size image","animationDelay","แชร์รูปภาพสำเร็จ!","close","</p>","fire",'\n                <img src="',"ไม่สามารถโหลดรูปภาพได้","textContent","error","forEach","99clMXlg","display","202877vBSIBN","isLoggedIn","16600CCuKsk","swal2-cancel","getProfile","appendChild","loading-text","loading-overlay","src","image-grid","setAttribute","addEventListener","signedUrl","image-item fade-in","style","profile-header","getElementById","การแชร์ล้มเหลว: ","isApiAvailable"];return(_0x16d5=function(){return e})()}const showLoading=(e=_0x35395a(390))=>{const t=_0x35395a;loadingText[t(326)]=e,loadingOverlay[t(345)].display=t(355)},hideLoading=()=>{const e=_0x35395a;loadingOverlay.style.display=e(373)},showToast=(e,t)=>{const a=_0x35395a;Swal[a(323)]({icon:e,title:t,toast:!0,position:a(383),showConfirmButton:!1,timer:3e3,timerProgressBar:!0,customClass:{popup:a(381),title:"swal2-title",confirmButton:a(350),cancelButton:a(334)}})};async function shareImageWithLiff(e){const t=_0x35395a;if(liff[t(349)]("shareTargetPicker"))try{const a={type:"image",originalContentUrl:e,previewImageUrl:e};await liff[t(385)]([a])&&showToast("success",t(320))}catch(e){console[t(327)](t(394),e),showToast("error",t(348)+e.message)}else showToast(t(327),t(386))}function showImageOptions(e){const t=_0x35395a;Swal.fire({title:"ตัวเลือกรูปภาพ",html:t(324)+e+t(361),showConfirmButton:!1,showCancelButton:!0,cancelButtonText:t(358),customClass:{popup:t(381),title:t(387),confirmButton:t(350),cancelButton:"swal2-cancel"},didOpen:()=>{const a=t;document.getElementById(a(351)).addEventListener(a(372),(()=>{const t=a;Swal.close(),Swal[t(323)]({imageUrl:e,imageAlt:t(318),showConfirmButton:!1,background:t(316),backdrop:"rgba(0,0,0,0.8)",customClass:{popup:t(381),image:t(371)}})})),document.getElementById("swal-share-btn").addEventListener(a(372),(()=>{Swal[a(321)](),shareImageWithLiff(e)}))}})}function renderImages(e){const t=_0x35395a;e[t(328)](((e,a)=>{const n=t;if(e[n(343)]){const t=document[n(374)](n(375));t.className=n(344),t.style[n(319)]=50*a+"ms",t[n(341)](n(366),n(360)),t[n(341)](n(354),"0"),t[n(392)]=n(380)+e[n(343)]+'" alt="User image" loading="lazy" onerror="this.parentElement.style.display=\'none\'">',t[n(342)](n(372),(()=>showImageOptions(e.signedUrl))),imageGrid[n(336)](t)}}))}async function fetchImages(){const e=_0x35395a;if(!isLoading&&hasMoreImages&&currentUserId){isLoading=!0,loadMoreBtn[e(326)]=e(390),loadMoreBtn[e(389)]=!0;try{const{data:t,error:a}=await supabaseClient[e(391)].invoke(e(353),{body:{userId:currentUserId,offset:imageOffset}});if(a)throw a;const n=t.images;n&&n[e(356)]>0?(renderImages(n),imageOffset+=n.length,n[e(356)]<50?(hasMoreImages=!1,loadMoreContainer[e(345)][e(330)]=e(373)):loadMoreContainer.style.display=e(313)):(hasMoreImages=!1,loadMoreContainer[e(345)][e(330)]=e(373),0===imageOffset&&(noImagesMessage.style[e(330)]=e(313)))}catch(t){console[e(327)](e(393),t),showToast(e(327),e(325))}finally{isLoading=!1,loadMoreBtn[e(326)]=e(363),loadMoreBtn[e(389)]=!1}}}document[_0x35395a(342)]("DOMContentLoaded",(async()=>{const e=_0x35395a;showLoading(e(367));try{if(await liff[e(379)]({liffId:LIFF_ID,withLoginOnExternalBrowser:!0}),!liff[e(332)]())return void liff[e(376)]({redirectUri:window.location[e(377)]});const t=await liff[e(335)]();currentUserId=t.userId,displayName.textContent=t.displayName,t[e(362)]&&(profilePicture[e(339)]=t[e(362)]),profileHeader[e(345)][e(312)]=e(352),await fetchImages()}catch(t){console[e(327)]("Critical Error:",t),document.body[e(392)]=e(382)+t.message+e(322)}finally{hideLoading()}})),loadMoreBtn[_0x35395a(342)](_0x35395a(372),fetchImages)</script>>
